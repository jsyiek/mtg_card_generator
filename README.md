# mtg_card_generator

## What is this?

This is a machine learning model to generate novel Magic: the Gathering cards from scratch. It trains on all cards in existence, and then uses a process similar to a Markov Model to generate the cards.

It has a dataset of all ~64000 cards in the game to learn from, and its parameters are generated by breaking the text of each card into "chunks" of 3 words. For any particular chunk, the computer keeps track of any chunks across all cards that have been seen to follow it and the number of times they have done so.

These chunks can be imagined as a directed graph with starting nodes with no incoming arcs (words that have started cards), ending nodes with no outgoing arcs (words from the end of a card), and middle nodes with both (words with chunks that have been seen to precede and follow it).

It generates a card's text by picking a random chunk it has seen as a starting chunk and traversing across this graph until it reaches an ending node, such that every two adjacent chunks it has chosen have been seen on an existing trading card. This can create coherent and (for the most part) previously unseen rules text.

Larger chunk lengths lead to more coherent but less original cards, and vice versa for smaller chunks.

This model was made after I studied Naive Bayes classifiers and before I studied Markov Models. The theory is based on how I interpreted an 'inversion' of Naive Bayes classifier.


## Installation

All that's needed is to install the package (via `pip install -e .`) into an environment. Then, you'll have access to the command line tool `make_mtg_card`. By default, running it will generate you one creature card, but you can fiddle with the parameters to get it working.

When you run it for the first time, you will need to wait ~5-10 minutes for it to download the dataset from an API.

### Example Usage

(Card text omitted for brevity)

```
>>> make_mtg_card
2022-03-16 21:06:17,206 - initialize_aggregated_data.py - INFO - Loading cached files...
2022-03-16 21:06:20,716 - initialize_aggregated_data.py - INFO - Training model...
RR
Creature - Human
...
Rare
1/1
----------------------------------------------------

>>> make_mtg_card -n 2 -c Instant Planeswalker
2022-03-16 21:07:16,127 - initialize_aggregated_data.py - INFO - Loading cached files...
2022-03-16 21:07:19,644 - initialize_aggregated_data.py - INFO - Training model...
RU
Instant
...
Common
----------------------------------------------------
3U
Instant
...
Uncommon
----------------------------------------------------
2UU
Planeswalker
...
Rare
4
----------------------------------------------------
2UW
Planeswalker
...
Mythic
4
----------------------------------------------------


>>> make_mtg_card -n 5 -tc 1
2022-03-16 21:08:37,994 - initialize_aggregated_data.py - INFO - Loading cached files...
2022-03-16 21:08:41,470 - initialize_aggregated_data.py - INFO - Training model...
2G
Creature - Human
...
Rare
2/2
----------------------------------------------------
2R
Creature - Human
...
Rare
2/2
----------------------------------------------------
2G
Creature - Human
...
Rare
2/2
----------------------------------------------------
3B
Creature - Human
...
Rare
3/3
----------------------------------------------------
2B
Creature - Human
...
Rare
2/2
----------------------------------------------------
```

## Example Generated Cards
```
2BB
Creature - Human
 whenever a samurai or warrior you control attacks alone, you may exile it. if you do, put three +1/+1 counters on it.
 whenever another creature dies, put a +1/+1 counter on ~.
Rare
3/3

RR
Enchantment
 players skip their untap steps.
 players can't untap more than one creature during their untap steps.
Rare


2UU
Planeswalker
 [ +1 ]: create a 3/3 green beast creature token. draw a card.
 [ 0 ]: discard all the cards in your hand, from your graveyard to your hand.
 [ âˆ’8 ]: draw seven cards. then discard two cards unless you discard an artifact card.
Mythic
4

U
Sorcery
 look at the top three cards of your library. put two of them into your hand and the other on the bottom of your library in a random order. you gain 3 life.
Common
```